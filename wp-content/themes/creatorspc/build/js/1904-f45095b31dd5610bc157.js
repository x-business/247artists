"use strict";(self.webpackChunkcreatorspc=self.webpackChunkcreatorspc||[]).push([[1904],{1904:(e,t,i)=>{i.r(t);var r=i(8760),s=i(8520),n=i(295),o=i(314);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function c(e,t,i){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(i||e):s.value}},c(e,t,i||e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=f(e);if(t){var s=f(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return function(e,t){return!t||"object"!=((i=t)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var i}(this,i)}}s.w$.registerPlugin(n.c,o.c),window.plr.controllers.SCommunityHome=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t=d(i);function i(){return h(this,i),t.apply(this,arguments)}return l(i,[{key:"init",value:function(){c(f(i.prototype),"init",this).call(this);var e=this.refs.canvas;this.ctx=e.getContext("2d"),this.render={width:window.safeWidth,height:window.safeHeight,dpi:window.devicePixelRatio},this.isPaused=!1,luge&&luge.emitter.once("beforePageInit",this.initGrid.bind(this))}},{key:"onResize",value:function(){this.initGrid()}},{key:"onViewportIn",value:function(){this.isPaused=!1}},{key:"onViewportOut",value:function(){this.isPaused=!0}},{key:"initGrid",value:function(){this.setBackgroundSize(),this.setCanvasSize(),this.setGrid(),this.initScroll()}},{key:"setBackgroundSize",value:function(){var e=this.refs.seconds,t=e.querySelector(":scope > *").offsetWidth;e.style.setProperty("--w","".concat(t,"px"))}},{key:"setCanvasSize",value:function(){var e=this.refs,t=e.canvas,i=e.wrapper.getBoundingClientRect();this.render={width:i.width,height:i.height,dpi:window.devicePixelRatio},t.width=this.render.width*this.render.dpi,t.height=this.render.height*this.render.dpi}},{key:"setGrid",value:function(){var e=this.refs,t=e.content,i=e.ruler,r=e.wrapper.getBoundingClientRect(),s=t.getBoundingClientRect(),n=(r.width-s.width)/2,o=(r.height-s.height)/2,h=i.offsetWidth,a=Math.round(s.width)/h,l=2*Math.ceil(o/h)+a,c=2*Math.ceil(n/h)+a,f=Math.floor(l/2),u=Math.floor(c/2),d=(r.height-l*h)/2,g=(r.width-c*h)/2,v=c*h,y=l*h,p=Math.max(r.width/s.width,r.height/s.height)*(1+.25*a),w=Math.max(1-s.width/r.width+.01,.925);this.grid={width:v,hWidth:v/2,height:y,hHeight:y/2,tilesV:l,tilesH:c,midV:f,midH:u,tileRatio:a,tileSize:h,offsetV:d,offsetH:g,perspective:p,depth:w,cells:[],tiles:[]};for(var x=0;x<c;x++){this.grid.cells[x]=[];for(var m=0;m<l;m++)this.grid.cells[x][m]=m>=f-a/2&&m<=f+a/2-1&&x>=u-a/2&&x<=u+a/2-1}this.setTiles()}},{key:"setTiles",value:function(){var e=this,t=this.refs.tile,i=this.grid,r=i.tilesH,s=i.tilesV,n=i.tileRatio,o=i.midH,h=i.midV;for(2===n&&t.forEach((function(t,i){var n=0,a=0;0===i?(n=o+1,a=h-3):1===i?(n=o+2,a=h+0):2===i?(n=o-3,a=h+0):3===i&&(n=o-4,a=h-2),n>=0&&n<r-2&&a>=0&&a<s-2&&e.createTile(n,a,"2x2",t)}));this.checkEmptyCells();){var a=this.pickAvailableCell(),l=a.x,c=a.y;this.createTile(l,c,"1x1")}}},{key:"pickAvailableCell",value:function(){var e=this.grid,t=e.cells,i=e.tilesH,r=e.tilesV,s=Math.floor(Math.random()*i),n=Math.floor(Math.random()*r);return t[s][n]?this.pickAvailableCell():{x:s,y:n}}},{key:"checkEmptyCells",value:function(){for(var e=this.grid,t=e.cells,i=e.tilesH,r=e.tilesV,s=0;s<i;s++)for(var n=0;n<r;n++)if(!t[s][n])return!0;return!1}},{key:"createTile",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.grid,n=s.cells,o=s.offsetH,h=s.offsetV,a=s.tileSize,l=o+e*a,c=h+t*a,f=this.grid.tilesH/2,u=this.grid.tilesV/2,d=Number(i.split("x")[0]),v=Number(i.split("x")[1]),y=a*d,p=a*v,w=e;w<e+d;w++)for(var x=t;x<t+v;x++)n[w][x]=!0;for(var m=999,k=0;k<d;k++){var b=Math.abs(e+k-f);b<m&&(m=b)}for(var V=999,S=0;S<v;S++){var T=Math.abs(t+S-u);T<V&&(V=T)}var C=new g(l,c,y,p,m+V,r,this);this.grid.tiles.push(C)}},{key:"initScroll",value:function(){this.tl&&this.tl.revert(),this.tl=s.w$.timeline({scrollTrigger:{trigger:this.el,start:"top 100%",end:"bottom 100%",scrub:.25}}),this.tl.fromTo(this.el,{"--progress":0},{"--progress":1,ease:"power1.out",duration:3},0),this.tl.fromTo(this.grid.tiles,{z:0},{z:1,duration:3,ease:n.c.create("custom","M0,0,C0.5,0,0.581,0.047,0.625,0.073,0.72,0.13,0.9,0.23,1,1"),stagger:{each:.1,from:"random"}},3)}},{key:"setTime",value:function(){var e=this.refs,t=e.hours,i=e.minutes,r=e.seconds,s=new Date,n=s.getHours(),o=s.getMinutes(),h=(s.getSeconds()+s.getMilliseconds()/1e3)/60;t.style.setProperty("--h",n),i.style.setProperty("--m",o),r.style.setProperty("--s",h)}},{key:"drawGrid",value:function(){this.grid&&this.grid.tiles.sort((function(e,t){return t.order-e.order})).forEach((function(e,t){e.draw()}))}},{key:"tick",value:function(e){if(!this.isPaused){var t=this.refs.canvas,i=this.ctx,r=this.render;i.clearRect(0,0,t.width,t.height),i.save(),i.scale(r.dpi,r.dpi),this.drawGrid(),this.setTime(),i.restore()}}}]),i}(r.c);var g=function(){function e(t,i,r,s,n,o,a){if(h(this,e),this.parent=a,this.x=t,this.y=i,this.w=r,this.h=s,this.center={x:t+r/2,y:i+s/2},this.order=n,this.el=o,this.z=0,this.setFrontVertices(),this.setBackVertices(),this.el){this.hasCover=!0;var l=o.querySelector("img");l.complete?this.createCover():l.addEventListener("load",this.createCover.bind(this),{once:!0})}else this.hasCover=!1}return l(e,[{key:"createCover",value:function(){this.setSize(),this.setImage(),this.setText();var e=new OffscreenCanvas(this.bounding.width,this.bounding.height),t=e.getContext("2d");e.width=this.bounding.width,e.height=this.bounding.height,this.cover={canvas:e,ctx:t},t.clearRect(0,0,e.width,e.height),t.fillStyle="#231E25",t.fillRect(0,0,e.width,e.height),t.fill(),this.drawImage(),this.drawText()}},{key:"setSize",value:function(){var e=this.el;this.bounding=e.getBoundingClientRect()}},{key:"setImage",value:function(){var e=this.el.querySelector("img"),t=e.getBoundingClientRect();this.image={img:e,x:t.x-this.bounding.x,y:t.y-this.bounding.y,w:t.width,h:t.height},this.image.r=this.image.w/this.image.h,this.image.relX=this.image.x/this.w,this.image.relY=this.image.y/this.h,this.image.relW=this.image.w/this.w,this.image.relH=this.image.h/this.h;var i={w:e.naturalWidth,h:e.naturalHeight},r=i.w,s=r/this.image.r;s>i.h&&(r=(s=i.h)*this.image.r);var n=(i.w-r)/2,o=(i.h-s)/2;i.x=n+2,i.y=o+2,i.w=r-4,i.h=s-4,this.image.source=i}},{key:"setText",value:function(){var e=this,t=this.el.querySelectorAll(".js-name, .js-role");this.texts=[],t.forEach((function(t){var i=getComputedStyle(t),r=t.innerText,s=t.getBoundingClientRect(),n={el:t,value:r,x:s.x-e.bounding.x,y:s.y-e.bounding.y,color:i.color,font:i.font,letterSpacing:i.letterSpacing};e.texts.push(n)}))}},{key:"setFrontVertices",value:function(){var e=this.parent,t=e.grid,i=e.render,r=this,s=r.x,n=r.y,o=r.w,h=r.h;this.frontVertices=[{x:s,y:n},{x:s+o,y:n},{x:s+o,y:n+h},{x:s,y:n+h}];var a={width:i.width*t.perspective,height:i.height*t.perspective};a.offsetX=(i.width-a.width)/2,a.offsetY=(i.height-a.height)/2,this.frontVertices.forEach((function(e){e.relX=e.x/i.width,e.relY=e.y/i.height,e.destX=a.offsetX+e.relX*a.width,e.destY=a.offsetY+e.relY*a.height,e.fromX=e.x,e.fromY=e.y}))}},{key:"setBackVertices",value:function(){var e=this,t=this.parent,i=t.grid,r=t.render,s={width:r.width*i.depth,height:r.height*i.depth};s.offsetX=(r.width-s.width)/2,s.offsetY=(r.height-s.height)/2;var n={width:s.width*i.perspective,height:s.height*i.perspective};n.offsetX=(r.width-n.width)/2,n.offsetY=(r.height-n.height)/2,this.backVertices=[],this.frontVertices.forEach((function(t){var i={x:s.offsetX+t.relX*s.width,y:s.offsetY+t.relY*s.height};i.isBehind=e.isVerticeBehind(i),i.destX=n.offsetX+t.relX*n.width,i.destY=n.offsetY+t.relY*n.height,i.fromX=i.x,i.fromY=i.y,e.backVertices.push(i)}))}},{key:"isVerticeBehind",value:function(e){var t=this.frontVertices,i=e.x,r=e.y,s=t[0],n=s.x,o=s.y,h=t[2],a=h.x,l=h.y;return i>n&&i<a&&r>o&&r<l}},{key:"getMovedVertice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.fromX,r=e.fromY,s=e.destX,n=e.destY;return{x:i+(s-i)*this.z*t,y:r+(n-r)*this.z*t}}},{key:"draw",value:function(){this.moveElement(),this.drawBack(),this.drawCover(),this.drawFront()}},{key:"drawFront",value:function(){var e=this,t=this.frontVertices,i=this.parent,r=i.ctx,s=i.grid;r.fillStyle="#a67eff",r.strokeStyle="#231E25",r.beginPath();var n=this.hasCover?20:1;if(t.forEach((function(t,i){var s=e.getMovedVertice(t,n),o=s.x,h=s.y;0===i?r.moveTo(o,h):r.lineTo(o,h)})),r.closePath(),r.fill(),r.stroke(),this.w>s.tileSize||this.h>s.tileSize){r.beginPath();var o=this.getMovedVertice(t[0],n),h=this.getMovedVertice(t[2],n),a=h.x-o.x,l=h.y-o.y;r.moveTo(o.x+a/2,o.y),r.lineTo(o.x+a/2,o.y+l),r.moveTo(o.x,o.y+l/2),r.lineTo(o.x+a,o.y+l/2),r.stroke()}}},{key:"drawCover",value:function(){var e=this.cover,t=this.parent;if(e){var i=t.ctx,r=this.getMovedVertice(this.frontVertices[0]),s=this.getMovedVertice(this.frontVertices[2]),n=s.x-r.x,o=s.y-r.y;i.drawImage(e.canvas,r.x,r.y,n,o)}}},{key:"drawImage",value:function(){var e=this.image;if(e){var t=this.cover.ctx,i=e.x,r=e.y,s=e.w,n=e.h;t.drawImage(e.img,e.source.x,e.source.y,e.source.w,e.source.h,i,r,s,n)}}},{key:"drawText",value:function(){var e=this.texts;if(e){var t=this.cover.ctx;t.save(),e.forEach((function(e){var i=e.x,r=e.y,s=e.color,n=e.font,o=e.letterSpacing,h=e.value;t.fillStyle=s,t.font=n,t.letterSpacing=o,t.textAlign="left",t.textBaseline="top",t.fillText(h,i,r)})),t.restore()}}},{key:"drawBack",value:function(){var e=this,t=e.backVertices,i=e.frontVertices,r=e.parent.ctx;r.fillStyle="#ff57f8",r.strokeStyle="#231E25",r.beginPath();var s=t.findIndex((function(e){return e.isBehind})),n=s+1<t.length?s+1:0,o=n+1<t.length?n+1:0,h=o+1<t.length?o+1:0,a=this.getMovedVertice(t[n]),l=this.getMovedVertice(t[o]),c=this.getMovedVertice(t[h]),f=this.getMovedVertice(i[s]),u=this.getMovedVertice(i[n]),d=this.getMovedVertice(i[o]),g=this.getMovedVertice(i[h]);r.moveTo(a.x,a.y),r.lineTo(l.x,l.y),r.lineTo(c.x,c.y),r.lineTo(g.x,g.y),r.lineTo(f.x,f.y),r.lineTo(u.x,u.y),r.closePath(),r.fill(),r.stroke(),r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(d.x,d.y),r.closePath(),r.stroke()}},{key:"moveElement",value:function(){if(this.el){var e=this.parent.grid,t=this.getMovedVertice(this.frontVertices[0]),i=1+(e.perspective-1)*this.z;this.el.style.setProperty("--x","".concat(t.x,"px")),this.el.style.setProperty("--y","".concat(t.y,"px")),this.el.style.setProperty("--scale",i)}}}]),e}()}}]);